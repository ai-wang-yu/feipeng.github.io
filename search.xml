<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Vue项目中后端返回数字（code），前端显示中文（name）</title>
    <url>/2020/06/20/hello-world/</url>
    <content><![CDATA[<p>tags:</p>
<ul>
<li>Vue</li>
<li>Array<br>categories:</li>
<li>[技术, Vue]</li>
</ul>
<p>比如：现在有一个数组</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">arr: [</span><br><span class="line">    &#123;<span class="string">"code"</span>: <span class="string">"0101"</span>, <span class="string">"name"</span>: <span class="string">"苹果"</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"code"</span>: <span class="string">"0102"</span>, <span class="string">"name"</span>: <span class="string">"荔枝"</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"code"</span>: <span class="string">"0103"</span>, <span class="string">"name"</span>: <span class="string">"甘蔗"</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"code"</span>: <span class="string">"0104"</span>, <span class="string">"name"</span>: <span class="string">"香蕉"</span>&#125;,</span><br><span class="line">	&#123;<span class="string">"code"</span>: <span class="string">"0105"</span>, <span class="string">"name"</span>: <span class="string">"龙眼"</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>后端返回一个值fruit: “0103”，页面上的showChinese这个值需要显示对应的中文</p>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>直接上代码</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">this.arr.forEach(e=&gt;&#123;</span><br><span class="line">    <span class="keyword">if</span> (e.code===this.fruit) &#123;</span><br><span class="line">        this.showChinese = e.name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>这样就可以显示对应的中文了，但是呢写法比较low，所以改进一下</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">this.arr.forEach(e=&gt;&#123;</span><br><span class="line">    e.code===this.fruit?this.showChinese = e.name:<span class="string">''</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="发现问题"><a href="#发现问题" class="headerlink" title="发现问题"></a>发现问题</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">this.arr.forEach(e=&gt;&#123;</span><br><span class="line">    e.code===this.fruit?this.showChinese = e.name:<span class="string">''</span></span><br><span class="line">    console.log(e.name, <span class="string">'e.name'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="打印结果"><a href="#打印结果" class="headerlink" title="打印结果"></a>打印结果</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">苹果 e.name</span><br><span class="line">荔枝 e.name</span><br><span class="line">甘蔗 e.name</span><br><span class="line">香蕉 e.name</span><br><span class="line">龙眼 e.name</span><br></pre></td></tr></table></figure>

<p>我们可以看到，循环执行了5遍，当循环的数组比较大时，就会有问题了，那可不可以跳出循环呢</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">this.arr.forEach(e=&gt;&#123;</span><br><span class="line">    <span class="keyword">if</span> (e.code===this.fruit) &#123;</span><br><span class="line">        this.showChinese = e.name</span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这是写法是错误的，项目编译的时候就会报错，foreach中无法用break跳出循环，for循环，for in循环，for of循环是可行的</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">let</span> index = 0; index &lt; this.arr.length; index++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (this.arr[index].code===this.fruit) &#123;</span><br><span class="line">        this.name = this.arr[index].name</span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">let</span> key <span class="keyword">in</span> this.arr) &#123;</span><br><span class="line">    <span class="keyword">if</span> (this.arr[key].code===this.fruit) &#123;</span><br><span class="line">        this.showChinese = this.arr[key].name</span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">let</span> key of this.arr) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key.code===this.fruit) &#123;</span><br><span class="line">        this.showChinese = key.name</span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>具体区别，可以查看<a href="https://juejin.im/post/5bc98082e51d450e4369bace" target="_blank" rel="noopener">for/for in/for of/forEach/map/filter/some/every区别对比</a></p>
<p>try，catch写法个人感觉比较麻烦，下面是比较推荐的写法</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">this.arr.some(e=&gt;&#123;</span><br><span class="line">    <span class="built_in">return</span> e.code===this.fruit?this.showChinese = e.name:<span class="string">''</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>转载本博客的文章请注明原始出处和作者</p>
]]></content>
  </entry>
</search>
